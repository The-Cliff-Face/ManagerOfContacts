<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manager of Contacts Sign up</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
</head>
<script>
    let requirementsSatisfied = false;

    document.addEventListener('DOMContentLoaded', function () {
        const confirmPasswordInput = document.getElementById('contact-password-confirm');
        const passwordInput = document.getElementById('contact-password');
        const errorMessage = document.getElementById('confirm-password-result');
        let m = false;
        let r = false;
        if (confirmPasswordInput && passwordInput && errorMessage) {
            confirmPasswordInput.addEventListener('input', function () {
                const input = this.value;
                const compare_input = passwordInput.value;
                errorMessage.style.display = "block";

                if (!validatePassword(input)) {
                    errorMessage.textContent = "Password requires at least 8 characters and one number.";
                    errorMessage.style.color = '#B50000';
                    r = false;
                } else {
                    r = true;
                    if (compare_input != input) {
                        errorMessage.textContent = "Passwords don't match.";
                        errorMessage.style.color = '#B50000';
                        m = false;
                    } else {
                        errorMessage.textContent = "Passwords match!";
                        errorMessage.style.color = '#008000';
                        m = true;
                    }
                }
                requirementsSatisfied = r & m;

            });
            passwordInput.addEventListener('input', function () {
                const input = this.value;
                const compare_input = confirmPasswordInput.value;
                errorMessage.style.display = "block";
                if (!validatePassword(input)) {
                    errorMessage.textContent = "Password requires at least 8 characters and one number.";
                    errorMessage.style.color = '#B50000';
                    r = true;
                } else {
                    r = false;
                    if (compare_input != input) {
                        errorMessage.textContent = "Passwords don't match.";
                        errorMessage.style.color = '#B50000';
                        m = false;
                    } else {
                        errorMessage.textContent = "Passwords match!";
                        errorMessage.style.color = '#008000';
                        m = true;
                    }
                }
                requirementsSatisfied = r & m;
            });

        }
    });
</script>

<body>
    <div class="form-container">
        <form class="form-box" id="submission-box" action="/">
            <h2>Sign Up</h2>
            <div class="input-control">
                <label for="username">Firstname</label>
                <input id="username" name="username" type="text">
                <div class="error"></div>
            </div>
            <div class="input-control">
                <label for="email">Lastname</label>
                <input id="email" name="lastname" type="text">
                <div class="error"></div>
            </div>

            <div class="input-control">
                <label for="password">Password</label>
                <input id="password" name="password" type="password">
                <div class="error"></div>
            </div>

            <div class="input-control">
                <label for="password">Password</label>
                <input id="password2" name="password2" type="password">
                <div class="error"></div>
                    
                </label>
            </div>

            <div class="form-group">
                <button type="button" onclick="register();" id="submit-register-button">Sign up</button>
                <p style="font-size:.75em;">Already have an account? <a href='login.html'>Log in</a></p>
            </div>
        </form>
    </div>
    <footer>
        <button class=home-button onclick="window.location.href='index.html'">
            <img src="images/home_icon.png" alt="Homepage">
        </button>
        <a href="https://github.com/The-Cliff-Face/Manager_Of_Contacts/blob/main/README.md">
            <img id="github-mark" src="images/github-mark.png" alt="github-icon">
        </a>
    </footer>
    <script src="js/scripts.js"></script>
    <script src="js/md5.js"></script>
</body>

</html>